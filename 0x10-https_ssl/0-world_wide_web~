#!/bin/bash
domain=$1

if [ -z $2 ]; then
subdomains=(www lb-01 web-01 web-02)
else
subdomains=$2
fi

print_line(){
    subdomain=$1
    record=$1
    result=$2
    echo "The subdomain $subdomain is a $record record and points to $result"
}


for subdomain in "${subdomains[@]}"; do
    result=$(dig +short $subdomain.$domain)

    
    if [ ! -z "$result" ]; then
        record=$(dig $subdomain.$domain | awk '/ANSWER SECTION/ {getline; print $4}')
        print_line $subdomain $record $result
    fi
done
